<useCase id="1">
    <name>Proceso de creación de identidad</name>
    <actors>
        <actor>User</actor>
        <actor>User_Web</actor>
        <actor>Associate_Web</actor>
        <actor>PushMovileManager</actor>
        <actor>Gateway</actor>
        <actor>MetaIdentityManager</actor>
        <actor>Proxy</actor>
        <actor>Registry</actor>
        <actor>Repository</actor>
    </actors>
    <mainSequence>
        <step id="S1">Instalación de la aplicación Alastria en el móvil</step>
        <step id="S2">Solicitud del token de sesión</step>
        <step id="S3">Entrega del token de sesión</step>
        <step id="S4">Quiero darme de alta en alastria id</step>
        <step id="S5">Preparación de objeto JSON con el alta en alastria</step>
        <step id="S6">Envío de la url de recuperación del JSON con el token de sesión</step>
        <step id="S7">Push de la url de recuperación del JSON</step>
        <step id="S8">Solicito la recuperación de la clave pública de la aplicación</step>
        <step id="S9">Recupero la clave pública del usuario</step>
        <step id="S10">Clave pública del alastria_id asociada a la aplicación</step>
        <step id="S11">Clave pública de alastria_id asociada a la aplicación</step>
        <step id="S12">Verificación de la firma del objeto JSON</step>
        <step id="S13">Creación del alastria_id del usuario</step>
        <step id="S14">Creación de claves</step>
        <step id="S15">Publicación en el Registry de la clave pública</step>
        <step id="S16">Devuelve OK de clave registrada</step>
        <step id="S17">OK</step>
        <step id="S18">Solicitud de los atestados aportados por el socio</step>
        <step id="S19">Construcción de los atestados del usuario (JSON Firmado)</step>
        <step id="S20">Envío de la URL de recuperación de los atestados</step>
        <step id="S21">Notificación Push con URL de recuperación de los atestados</step>
        <step id="S22">Verificación de la firma del objeto JSON</step>
        <step id="S23">Aceptación y firma de los atestados</step>
        <step id="S24">Almacenamiento del atestado</step>
        <step id="S25">Uri de recuperación</step>
        <step id="S26">Registro de los atributo en registry</step>
        <step id="S27">Registro de los atributos en registry (Hash y/o URI por atributo)</step>
        <step id="S28">Registro OK</step>
    </mainSequence>
</useCase>
